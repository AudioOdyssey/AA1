{% extends "template.html" %}
{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/story/event/show.css') }}" type="text/css"/>
<script src="{{ url_for('static', filename='js/story/event/show.js') }}"></script>

<section class="row">
    <button type="button" onclick="add_btn_pressed('{{ story_id }}')" id="add-btn" class="btn btn-light"><i class="fas fa-plus"></i></button>
</section>

<form id="ev-template" onclick="set_focus(this)" method="POST" action="{{ url_for('event_update') }}">
    <input name="story_id" readonly class="hidden-in">
    <input name="event_id" readonly class="hidden-in">
    <button type= "button" onclick= "delete_btn_pressed('{{story_id , event_id}}')" class="trash"><i class="fa fa-minus"></i></button>
    <section class="event-row row">
        <section class="row flex-1">
            <div class="col-sm-4">
                <label><b>Name:</b></label>
                <input class="form-control" type="text" name="event_name">
            </div>
            <div class = "col-sm-8">
                <label for = "locations"><b>Location:</b></label>
                <select id= "locations">
                    {% for locations in location %}
                        <option>{{location.location_name}}</option>
                    {%endfor%}
                </select>
            </div>
        </section>
        <section class="flex-0" onclick="event_show(this)">
            <i class="fas fa-chevron-down fa-lg down-arrow"></i>
        </section>
    </section>
    <section class="row details" style="display: none">
        <hr>
        <label>Description</label>
        <textarea class="form-control" rows="3" name="ev_description"></textarea>

        <label>Is global?</label>
        <input type="checkbox" autocomplete="off" name="is_global">

        <br>
    </section>
</form>

<div id="content-marker"></div>

{% for event in events %}
<form action="{{ url_for('event_update') }}" class="event-main-row" onclick="set_focus(this)" method="POST">
    <input name="story_id" value="{{ event.story_id }}" readonly class="hidden-in">
    <input name="event_id" value="{{ event.event_id }}" readonly class="hidden-in">
    <button type= "button" onclick= "delete_btn_pressed('{{story_id , event_id}}')" class="trash"><i class="fa fa-minus"></i></button>
    <section class="event-row row">
        <section class="row flex-1">
            <div class="col-sm-4">
                <label><b>Name:</b></label>
                <input class="form-control" type="text" name="event_name" onchange="event_changed(this)" value="{{ event.event_name }}">
            </div>
            <div class="col-sm-8">
                <label for= "locations"><b>Location:</b></label>
                <select id= "locations" class="form-control" type="text" name="event_location" onchange="event_changed(this)">
                            {% for locations in location %}
                                <option>{{location.location_name}}</option>
                            {%endfor%}
                </select>
            </div>
        </section>
        <section class="flex-0" onclick="event_show(this)">
            <i class="fas fa-chevron-down fa-lg down-arrow"></i>
        </section>
    </section>
    <section class="row details" style="display: none">
        <hr>
        <label>Description</label>
        <textarea class="form-control" rows="3" name="ev_description" onchange="event_changed(this)">{{ event.event_description }}</textarea>

        <label>Is global?</label>
        {% if event.event_is_global %}
        <input type="checkbox" autocomplete="off" name="is_global" onchange="event_changed(this)">
        {% else %}
        <input type="checkbox" autocomplete="off" name="is_global" onchange="event_changed(this)" checked>
        {% endif %}

        <br>

    </section>
</form>
{% endfor %}

{% endblock %}